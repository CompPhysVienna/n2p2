<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>nnp-checkf &mdash; n2p2 - A neural network potential package &#34;9bd5231&#34; documentation</title>
      <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script async="async" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="nnp-convert" href="nnp-convert.html" />
    <link rel="prev" title="nnp-atomenv" href="nnp-atomenv.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
            <a href="../index.html" class="icon icon-home"> n2p2 - A neural network potential package
          </a>
              <div class="version">
                "9bd5231"
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../topics/build.html">Build instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/descriptors.html">Atomic environment descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/keywords.html">NNP configuration: keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/cfg_file.html">Configuration file format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/training.html">NNP training procedure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/units.html">Units</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Interfaces</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../interfaces/if_lammps.html">LAMMPS NNP interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interfaces/pair_nnp.html">LAMMPS NNP pair style</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interfaces/if_cabanamd.html">CabanaMD interface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="libnnp.html">The libnnp core library</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-atomenv.html">nnp-atomenv</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">nnp-checkf</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sample-screen-output">Sample screen output:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#file-output">File output:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#examples">Examples:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="nnp-convert.html">nnp-convert</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-norm.html">nnp-norm</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-predict.html">nnp-predict</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-prune.html">nnp-prune</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-select.html">nnp-select</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-scaling.html">nnp-scaling</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-train.html">nnp-train</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/cabanamd_build_example.html">CabanaMD GPU build example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/cg_descriptor_analysis.html">Descriptor analysis/Coarse-graining</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/neural_network.html">Neural network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/cutoff_functions.html">Cutoff functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/symmetry_function_types.html">Symmetry function types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/symmetry_function_scaling.html">Symmetry function scaling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/memory_layout.html">Memory layout</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/how_to_cite.html">How to cite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">n2p2 - A neural network potential package</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
      <li>nnp-checkf</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tools/nnp-checkf.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nnp-checkf">
<span id="id1"></span><h1>nnp-checkf<a class="headerlink" href="#nnp-checkf" title="Permalink to this heading"></a></h1>
<p>This tool is useful for debugging as it computes numeric forces via the
symmetric difference quotient (central difference) and compares it to the
analytic forces obtained directly from n2p2’s prediction. Parallelization via
MPI is supported and it can process multiple configurations in the input file.</p>
<section id="requirements">
<h2>Requirements:<a class="headerlink" href="#requirements" title="Permalink to this heading"></a></h2>
<p>The HDNNP setup, symmetry function scaling data and weight parameters are
required in the usual files. The data file <code class="docutils literal notranslate"><span class="pre">input.data</span></code> may contain multiple
configurations.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">input.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input.nn</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">scaling.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">weights.???.data</span></code></p></li>
</ul>
</section>
<section id="usage">
<h2>Usage:<a class="headerlink" href="#usage" title="Permalink to this heading"></a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mpirun -np &lt;np&gt; nnp-checkf &lt;&lt;delta&gt;&gt;
</pre></div>
</div>
<p>where</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>&lt;np&gt; ........ Number of MPI processes to use.
&lt;&lt;delta&gt;&gt; ... (optional) Displacement for central difference (default: 1.0e-4).
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">&lt;&lt;delta&gt;&gt;</span></code> parameter determines the position displacement of atoms used
for the central difference approximation of the forces. If no value is provided
the default is <span class="math notranslate nohighlight">\(\delta = 10^{-4}\)</span>.</p>
</section>
<section id="sample-screen-output">
<h2>Sample screen output:<a class="headerlink" href="#sample-screen-output" title="Permalink to this heading"></a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>*** ANALYTIC/NUMERIC FORCES CHECK *********************************************

Delta for symmetric difference quotient:   1.000E-04
Individual analytic/numeric forces will be written to &quot;checkf-forces.out&quot;
Per-structure summary of analytic/numeric force comparison will be
written to &quot;checkf-summary.out&quot;
Found 3 configurations in data file: input.data.
Starting loop over 3 configurations...

                       numForces meanAbsError  maxAbsError  verdict
-------------------------------------------------------------------
Configuration      1:        144    7.168E-10    2.984E-09  OK.
Configuration      2:        144    8.215E-10    3.212E-09  OK.
Configuration      3:        144    7.254E-10    2.459E-09  OK.
*******************************************************************************
</pre></div>
</div>
</section>
<section id="file-output">
<h2>File output:<a class="headerlink" href="#file-output" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">checkf-forces.out</span></code>: Comparison of analytic/numeric values, each force one
line.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">checkf-summary.out</span></code>: Per-structure accumulated comparison (same as screen
output).</p></li>
</ul>
</section>
<section id="examples">
<h2>Examples:<a class="headerlink" href="#examples" title="Permalink to this heading"></a></h2>
<ul>
<li><p>Run on 4 cores and override default <span class="math notranslate nohighlight">\(\delta\)</span> value:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>mpirun -np 4 nnp-checkf 1.0E-3
</pre></div>
</div>
</li>
</ul>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="nnp-atomenv.html" class="btn btn-neutral float-left" title="nnp-atomenv" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="nnp-convert.html" class="btn btn-neutral float-right" title="nnp-convert" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Andreas Singraber.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>