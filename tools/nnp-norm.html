

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>nnp-norm &mdash; n2p2 - A neural network potential package &#34;e6a46df&#34; documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=fa44fd50" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=e59714d7" />

  
      <script src="../_static/jquery.js?v=5d32c60e"></script>
      <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../_static/documentation_options.js?v=2b224a83"></script>
      <script src="../_static/doctools.js?v=9bcbadda"></script>
      <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="nnp-predict" href="nnp-predict.html" />
    <link rel="prev" title="nnp-convert" href="nnp-convert.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            n2p2 - A neural network potential package
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Topics</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../topics/build.html">Build instructions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/descriptors.html">Atomic environment descriptors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/keywords.html">NNP configuration: keywords</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/cfg_file.html">Configuration file format</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/training.html">NNP training procedure</a></li>
<li class="toctree-l1"><a class="reference internal" href="../topics/units.html">Units</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Interfaces</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../interfaces/if_lammps.html">LAMMPS interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../interfaces/if_cabanamd.html">CabanaMD interface</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Tools</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="libnnp.html">The libnnp core library</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-atomenv.html">nnp-atomenv</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-checkf.html">nnp-checkf</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-convert.html">nnp-convert</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">nnp-norm</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#requirements">Requirements:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#usage">Usage:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#sample-screen-output">Sample screen output:</a></li>
<li class="toctree-l2"><a class="reference internal" href="#file-output">File output:</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="nnp-predict.html">nnp-predict</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-prune.html">nnp-prune</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-select.html">nnp-select</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-scaling.html">nnp-scaling</a></li>
<li class="toctree-l1"><a class="reference internal" href="nnp-train.html">nnp-train</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Miscellaneous</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../misc/cabanamd_build_example.html">CabanaMD GPU build example</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc/cg_descriptor_analysis.html">Descriptor analysis/Coarse-graining</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../api/neural_network.html">Neural network</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/cutoff_functions.html">Cutoff functions</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/symmetry_function_types.html">Symmetry function types</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/symmetry_function_scaling.html">Symmetry function scaling</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/memory_layout.html">Memory layout</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../about/authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/how_to_cite.html">How to cite</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../about/changelog.html">Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">n2p2 - A neural network potential package</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">nnp-norm</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/tools/nnp-norm.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="nnp-norm">
<span id="id1"></span><h1>nnp-norm<a class="headerlink" href="#nnp-norm" title="Link to this heading"></a></h1>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The use of this tool is not recommended any more because the data set
normalization can now be performed on-the-fly during training with the
keyword <a class="reference internal" href="../topics/keywords.html#normalize-data-set"><span class="std std-ref">normalize_data_set</span></a>.</p>
</div>
<p>This is a helper tool for the <a class="reference internal" href="../topics/training.html#training"><span class="std std-ref">training procedure</span></a> which enables
an optional data set normalization. Please have a look at this <a class="reference internal" href="../topics/units.html#units"><span class="std std-ref">explanation</span></a> why normalization may help to achieve consistent training results.
A full description of the procedure is provided in section 3.1 in <a class="footnote-reference brackets" href="#id3" id="id2" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>. In
short, the normalization is achieved by subtracting a mean energy per atom and
converting energy and length units in such way that the energies per atom and the
forces have unit standard deviation. In practice, this requires three numbers
which are  computed from statistical characteristics of the data set:</p>
<ol class="arabic simple">
<li><p>mean energy per atom (keyword <code class="docutils literal notranslate"><span class="pre">mean_energy</span></code>)</p></li>
<li><p>energy unit conversion factor (keyword <code class="docutils literal notranslate"><span class="pre">conv_energy</span></code>)</p></li>
<li><p>length unit conversion factor (keyword <code class="docutils literal notranslate"><span class="pre">conv_length</span></code>)</p></li>
</ol>
<p>However, this tool will not actually apply the normalization to the data set but
rather store the above numbers as keyword-value pairs in an additional header of
the settings file. Other n2p2 tools will read them in, confirm the activation of
the normalization in the log file and automatically apply unit conversion
on-the-fly. No additional intervention by the user is required!</p>
<section id="requirements">
<h2>Requirements:<a class="headerlink" href="#requirements" title="Link to this heading"></a></h2>
<p>A data set with multiple configurations and a basic settings file are required:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">input.data</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input.nn</span></code></p></li>
</ul>
<p>A working symmetry function setup in the settings file is not required, only
basic information about elements is needed.</p>
</section>
<section id="usage">
<h2>Usage:<a class="headerlink" href="#usage" title="Link to this heading"></a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>nnp-norm
</pre></div>
</div>
</section>
<section id="sample-screen-output">
<h2>Sample screen output:<a class="headerlink" href="#sample-screen-output" title="Link to this heading"></a></h2>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>*** DATA SET NORMALIZATION ****************************************************

Writing energy/atom vs. volume/atom data to &quot;evsv.dat&quot;.

Total number of structures: 20
Total number of atoms     : 2064
Mean/sigma energy per atom:  -2.33538240E-01 +/-   1.17415619E-03
Mean/sigma force          :  -8.55943153E-12 +/-   2.67687948E-02
Conversion factor energy  :   8.5167544626563699E+02
Conversion factor length  :   2.2798325235535355E+01

Writing converted data file to &quot;output.data&quot;.
WARNING: This data set is provided for debugging purposes only and is NOT intended for training.

Writing backup of original settings file to &quot;input.nn.bak&quot;.

Writing extended settings file to &quot;input.nn&quot;.

Use this settings file for normalized training.
*******************************************************************************
</pre></div>
</div>
</section>
<section id="file-output">
<h2>File output:<a class="headerlink" href="#file-output" title="Link to this heading"></a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">input.nn</span></code>: The settings file with additional normalization header.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">input.nn.bak</span></code>: A backup of the original settings file without normalization keywords.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">evsv.dat</span></code>: Energies, volumes and atom numbers of all configurations in the
data set.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">output.data</span></code>: The data set with normalization applied, only for debugging
purposes.</p></li>
</ul>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="id3" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">1</a><span class="fn-bracket">]</span></span>
<p>Singraber, A.; Morawietz, T.; Behler, J.; Dellago, C. Parallel
Multistream Training of High-Dimensional Neural Network Potentials. J. Chem.
Theory Comput. 2019, 15 (5), 3075–3092. <a class="reference external" href="https://doi.org/10.1021/acs.jctc.8b01092">https://doi.org/10.1021/acs.jctc.8b01092</a></p>
</aside>
</aside>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="nnp-convert.html" class="btn btn-neutral float-left" title="nnp-convert" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="nnp-predict.html" class="btn btn-neutral float-right" title="nnp-predict" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Andreas Singraber.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>